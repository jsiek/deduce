
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="stdlib.css">
</head>
<body>
    <pre><code><span style="color: gray">/*
  Represent multisets as function to Nat.
  */</span>

<span style="color: #d85311">import</span> <a href="Base.pf.html"><span style="color: #0f95af">Base</span></a>
<span style="color: #d85311">import</span> <a href="Nat.pf.html"><span style="color: #0f95af">Nat</span></a>
<span style="color: #d85311">import</span> <a href="Set.pf.html"><span style="color: #0f95af">Set</span></a>

<span style="color: #d85311">union</span> <a href="MultiSet.pf.html#MultiSet185"><span id="MultiSet185" style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span> <span style="color: #2e2d31">{</span>
  <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #0f95af">fn</span><span style="color: #2e2d31">(</span><span style="color: black">T</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">-&gt;</span> <a href="Nat.pf.html#Nat211"><span style="color: #0f95af">Nat</span></a><span style="color: #2e2d31">)</span>
<span style="color: #2e2d31">}</span>

<span style="color: #d85311">function</span> <a href="MultiSet.pf.html#cnt186"><span id="cnt186" style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">(</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">-&gt;</span> <span style="color: #0f95af">fn</span><span style="color: #2e2d31">(</span><span style="color: black">T</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">-&gt;</span><a href="Nat.pf.html#Nat211"><span style="color: #0f95af">Nat</span></a> <span style="color: #2e2d31">{</span>
  <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: black">f</span>
<span style="color: #2e2d31">}</span>

<span style="color: #d85311">define</span> <span style="color: black">m_one</span> <span style="color: #2e2d31">:</span> <span style="color: #0f95af">fn</span><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span> <span style="color: black">T</span> <span style="color: #2e2d31">-&gt;</span> <a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
         <span style="color: #2e2d31">=</span> <span style="color: #d85311">generic</span> <span style="color: black">T</span> <span style="color: #2e2d31">{</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span> <span style="color: #2e2d31">{</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">y</span><span style="color: #2e2d31">{</span><span style="color: #d85311">if</span> <span style="color: black">x</span> <span style="color: #2e2d31">=</span> <span style="color: black">y</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">1</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">0</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">}</span> <span style="color: #2e2d31">}</span>

<span style="color: #d85311">define</span> <span style="color: #d85311">operator</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: #2e2d31">:</span> <span style="color: #0f95af">fn</span><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span> <a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span> <span style="color: #2e2d31">-&gt;</span> <a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
         <span style="color: #2e2d31">=</span> <span style="color: #d85311">generic</span> <span style="color: black">T</span> <span style="color: #2e2d31">{</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">P</span><span style="color: #2e2d31">,</span><span style="color: black">Q</span><span style="color: #2e2d31">{</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">{</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">P</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">Q</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">}</span> <span style="color: #2e2d31">}</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#m_one_cnt187"><span id="m_one_cnt187" style="color: #086c3c">m_one_cnt</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">.</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">m_one</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">1</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
  <span style="color: #d85311">definition</span> <span style="color: #2e2d31">{</span><span style="color: black">m_one</span><span style="color: #2e2d31">,</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#m_empty_zero188"><span id="m_empty_zero188" style="color: #086c3c">m_empty_zero</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">.</span>
  <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">y</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #9329ab">0</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
  <span style="color: #d85311">definition</span> <span style="color: #2e2d31">{</span><a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#cnt_sum189"><span id="cnt_sum189" style="color: #086c3c">cnt_sum</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">.</span>
  <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">A</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">A</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
  <span style="color: #d85311">definition</span> <span style="color: #2e2d31">{</span><span style="color: #d85311">operator</span> <span style="color: #2e2d31">&#x2A04;</span><span style="color: #2e2d31">,</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>

<span style="color: gray">// Testing alternate asci notation </span>
<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#m_sum_empty190"><span id="m_sum_empty190" style="color: #086c3c">m_sum_empty</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">.</span>
  <span style="color: black">A</span> <span style="color: #2e2d31">.+.</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">y</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #9329ab">0</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: black">A</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
  <span style="color: #d85311">switch</span> <span style="color: black">A</span> <span style="color: #d85311">for</span> <span style="color: #d85311">operator</span> <span style="color: #2e2d31">.+.</span><span style="color: #2e2d31">,</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a> <span style="color: #2e2d31">{</span>
    <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
      <span style="color: #d85311">have</span> <span style="color: black">eq</span><span style="color: #2e2d31">:</span> <span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: #9329ab">0</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span> <span style="color: #2e2d31">:</span> <span style="color: #0f95af">fn</span> <span style="color: black">T</span><span style="color: #2e2d31">-&gt;</span><a href="Nat.pf.html#Nat211"><span style="color: #0f95af">Nat</span></a><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: black">f</span>
        <span style="color: #d85311">by</span> <span style="color: #d85311">extensionality</span> <span style="color: #d85311">arbitrary</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
           <span style="color: #d85311">rewrite</span> <a href="Nat.pf.html#add_zero232"><span style="color: #086c3c">add_zero</span></a><span style="color: #2e2d31">[</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">]</span>
      <span style="color: #d85311">rewrite</span> <span style="color: black">eq</span>
    <span style="color: #2e2d31">}</span>
  <span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#empty_m_sum191"><span id="empty_m_sum191" style="color: #086c3c">empty_m_sum</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">.</span>
  <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #9329ab">0</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">A</span> <span style="color: #2e2d31">=</span> <span style="color: black">A</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
  <span style="color: #d85311">switch</span> <span style="color: black">A</span> <span style="color: #d85311">for</span> <span style="color: #d85311">operator</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: #2e2d31">{</span>
    <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
      <span style="color: #d85311">have</span> <span style="color: black">eq</span><span style="color: #2e2d31">:</span> <span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #9329ab">0</span> <span style="color: #2e2d31">+</span> <span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: black">f</span>
        <span style="color: #d85311">by</span> <span style="color: #d85311">extensionality</span> <span style="color: #d85311">arbitrary</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
	   <span style="color: #d85311">definition</span> <span style="color: #2e2d31">{</span><a href="Nat.pf.html#operator+212"><span style="color: #086c3c">operator +</span></a><span style="color: #2e2d31">}</span>
      <span style="color: #d85311">definition</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a> <span style="color: #d85311">and</span> <span style="color: #d85311">rewrite</span> <span style="color: black">eq</span>
    <span style="color: #2e2d31">}</span>
  <span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>


<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#m_sum_commutes192"><span id="m_sum_commutes192" style="color: #086c3c">m_sum_commutes</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">.</span>
  <span style="color: black">A</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">B</span> <span style="color: #2e2d31">=</span> <span style="color: black">B</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">A</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
  <span style="color: #d85311">switch</span> <span style="color: black">A</span> <span style="color: #d85311">for</span> <span style="color: #d85311">operator</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: #2e2d31">{</span>
    <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
      <span style="color: #d85311">switch</span> <span style="color: black">B</span> <span style="color: #2e2d31">{</span>
        <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">g</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
	  <span style="color: #d85311">suffices</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span>
                 <span style="color: #2e2d31">=</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span>
              <span style="color: #d85311">by</span> <span style="color: #d85311">definition</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a>
	  <span style="color: #d85311">have</span> <span style="color: black">eq</span><span style="color: #2e2d31">:</span> <span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span>
	    <span style="color: #d85311">by</span> <span style="color: #d85311">extensionality</span> <span style="color: #d85311">arbitrary</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
	       <span style="color: #d85311">rewrite</span> <a href="Nat.pf.html#add_commute238"><span style="color: #086c3c">add_commute</span></a><span style="color: #2e2d31">[</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">]</span><span style="color: #2e2d31">[</span><span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">]</span>
	  <span style="color: #d85311">rewrite</span> <span style="color: black">eq</span>
	<span style="color: #2e2d31">}</span>
      <span style="color: #2e2d31">}</span>
    <span style="color: #2e2d31">}</span>
  <span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#m_sum_assoc193"><span id="m_sum_assoc193" style="color: #086c3c">m_sum_assoc</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">C</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">.</span>
  <span style="color: #2e2d31">(</span><span style="color: black">A</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">B</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">C</span> <span style="color: #2e2d31">=</span> <span style="color: black">A</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: #2e2d31">(</span><span style="color: black">B</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">C</span><span style="color: #2e2d31">)</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">C</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
  <span style="color: #d85311">switch</span> <span style="color: black">A</span> <span style="color: #d85311">for</span> <span style="color: #d85311">operator</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: #2e2d31">{</span>
    <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
      <span style="color: #d85311">switch</span> <span style="color: black">B</span> <span style="color: #2e2d31">{</span>
	      <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">g</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
	        <span style="color: #d85311">switch</span> <span style="color: black">C</span> <span style="color: #2e2d31">{</span>
	          <span style="color: #d85311">case</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: black">h</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
	            <span style="color: #d85311">suffices</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">h</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span>
                     <span style="color: #2e2d31">=</span> <span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: black">f</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: #2e2d31">(</span><span style="color: black">g</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <span style="color: black">h</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span>
                  <span style="color: #d85311">by</span> <span style="color: #d85311">definition</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a>
              <span style="color: #2e2d31">.</span>
	          <span style="color: #2e2d31">}</span>
	        <span style="color: #2e2d31">}</span>
	      <span style="color: #2e2d31">}</span>
      <span style="color: #2e2d31">}</span>
    <span style="color: #2e2d31">}</span>
  <span style="color: #2e2d31">}</span>
<span style="color: #d85311">end</span>

<span style="color: #d85311">define</span> <span style="color: black">set_of_mset</span> <span style="color: #2e2d31">:</span> <span style="color: #0f95af">fn</span><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span> <a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span> <span style="color: #2e2d31">-&gt;</span> <a href="Set.pf.html#Set164"><span style="color: #0f95af">Set</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
  <span style="color: #2e2d31">=</span> <span style="color: #d85311">generic</span> <span style="color: black">T</span> <span style="color: #2e2d31">{</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">M</span><span style="color: #2e2d31">{</span><span style="color: black">char_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">{</span> <span style="color: #d85311">if</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">M</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span> <span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">}</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#som_one_single194"><span id="som_one_single194" style="color: #086c3c">som_one_single</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">.</span>
  <span style="color: black">set_of_mset</span><span style="color: #2e2d31">(</span><span style="color: black">m_one</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <a href="Set.pf.html#single166"><span style="color: #086c3c">single</span></a><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">z</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
  <span style="color: #d85311">have</span> <span style="color: black">eq</span><span style="color: #2e2d31">:</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">m_fun</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">&#x03BB;</span><span style="color: black">y</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <span style="color: black">z</span> <span style="color: #2e2d31">=</span> <span style="color: black">y</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">1</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">0</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span>
               <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span>
           <span style="color: #2e2d31">=</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">y</span><span style="color: #2e2d31">{</span><span style="color: black">z</span> <span style="color: #2e2d31">=</span> <span style="color: black">y</span><span style="color: #2e2d31">}</span>
    <span style="color: #d85311">by</span> <span style="color: #d85311">extensionality</span>
       <span style="color: #d85311">arbitrary</span> <span style="color: black">y</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
       <span style="color: #d85311">switch</span> <span style="color: black">y</span> <span style="color: #2e2d31">=</span> <span style="color: black">z</span> <span style="color: #d85311">for</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a> <span style="color: #2e2d31">{</span>
         <span style="color: #d85311">case</span> <span style="color: #9329ab">true</span> <span style="color: #d85311">suppose</span> <span style="color: black">yz_true</span> <span style="color: #2e2d31">{</span>
	   <span style="color: #d85311">have</span> <span style="color: black">z_y</span><span style="color: #2e2d31">:</span> <span style="color: black">z</span> <span style="color: #2e2d31">=</span> <span style="color: black">y</span>
	     <span style="color: #d85311">by</span> <span style="color: #d85311">symmetric</span> <span style="color: #d85311">rewrite</span> <span style="color: black">yz_true</span>
	   <span style="color: #d85311">rewrite</span> <span style="color: black">z_y</span>
	 <span style="color: #2e2d31">}</span>
	 <span style="color: #d85311">case</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">suppose</span> <span style="color: black">yz_false</span> <span style="color: #2e2d31">{</span>
	   <span style="color: #d85311">have</span> <span style="color: black">not_zy</span><span style="color: #2e2d31">:</span> <span style="color: #d85311">not</span> <span style="color: #2e2d31">(</span><span style="color: black">z</span> <span style="color: #2e2d31">=</span> <span style="color: black">y</span><span style="color: #2e2d31">)</span>
	     <span style="color: #d85311">by</span> <span style="color: #d85311">suppose</span> <span style="color: black">zy</span>
	        <span style="color: #d85311">rewrite</span> <span style="color: black">yz_false</span> <span style="color: #d85311">in</span> <span style="color: #d85311">symmetric</span> <span style="color: black">zy</span>
	   <span style="color: #d85311">rewrite</span> <span style="color: #2e2d31">(</span><span style="color: #d85311">apply</span> <a href="Base.pf.html#eq_false201"><span style="color: #086c3c">eq_false</span></a> <span style="color: #d85311">to</span> <span style="color: black">not_zy</span><span style="color: #2e2d31">)</span>
	 <span style="color: #2e2d31">}</span>
       <span style="color: #2e2d31">}</span>
  <span style="color: #d85311">definition</span> <span style="color: #2e2d31">{</span><span style="color: black">m_one</span><span style="color: #2e2d31">,</span> <a href="Set.pf.html#single166"><span style="color: #086c3c">single</span></a><span style="color: #2e2d31">,</span> <span style="color: black">set_of_mset</span><span style="color: #2e2d31">}</span>
  <span style="color: #d85311">and</span> <span style="color: #d85311">rewrite</span> <span style="color: black">eq</span>
<span style="color: #d85311">end</span>

<span style="color: #d85311">theorem</span> <a href="MultiSet.pf.html#som_union195"><span id="som_union195" style="color: #086c3c">som_union</span></a><span style="color: #2e2d31">:</span> <span style="color: #d85311">all</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span><span style="color: #2e2d31">.</span> <span style="color: #d85311">all</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">.</span>
  <span style="color: black">set_of_mset</span><span style="color: #2e2d31">(</span><span style="color: black">A</span> <span style="color: #2e2d31">&#x2A04;</span> <span style="color: black">B</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: black">set_of_mset</span><span style="color: #2e2d31">(</span><span style="color: black">A</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">&#x222A;</span> <span style="color: black">set_of_mset</span><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span>
<span style="color: #d85311">proof</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">T</span><span style="color: #2e2d31">:</span><span style="color: #0f95af">type</span>
  <span style="color: #d85311">arbitrary</span> <span style="color: black">A</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span><span style="color: #2e2d31">,</span> <span style="color: black">B</span><span style="color: #2e2d31">:</span><a href="MultiSet.pf.html#MultiSet185"><span style="color: #0f95af">MultiSet</span></a><span style="color: #2e2d31">&lt;</span><span style="color: black">T</span><span style="color: #2e2d31">&gt;</span>
  <span style="color: #d85311">have</span> <span style="color: black">eq</span><span style="color: #2e2d31">:</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">A</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span>
         <span style="color: #2e2d31">=</span> <span style="color: #2e2d31">&#x03BB;</span><span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span><span style="color: #2e2d31">{</span><span style="color: #2e2d31">(</span><span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">A</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span>
                <span style="color: #d85311">or</span> <span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">}</span>
    <span style="color: #d85311">by</span> <span style="color: #d85311">extensionality</span>  <span style="color: #d85311">arbitrary</span> <span style="color: black">x</span><span style="color: #2e2d31">:</span><span style="color: black">T</span>
       <span style="color: #d85311">switch</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">A</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">{</span>
         <span style="color: #d85311">case</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">suppose</span> <span style="color: black">Ax_z</span> <span style="color: #2e2d31">{</span>
	   <span style="color: #d85311">suffices</span> <span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <span style="color: #9329ab">0</span> <span style="color: #2e2d31">+</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span>
                  <span style="color: #2e2d31">=</span> <span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span> <span style="color: #d85311">by</span> <span style="color: #d85311">rewrite</span> <span style="color: black">Ax_z</span>
	   <span style="color: #d85311">definition</span> <a href="Nat.pf.html#operator+212"><span style="color: #086c3c">operator +</span></a>
	 <span style="color: #2e2d31">}</span>
	 <span style="color: #d85311">case</span> <span style="color: black">suc</span><span style="color: #2e2d31">(</span><span style="color: black">Ax</span><span style="color: #2e2d31">)</span> <span style="color: #d85311">suppose</span> <span style="color: black">Ax_s</span> <span style="color: #2e2d31">{</span>
	   <span style="color: #d85311">suffices</span> <span style="color: #2e2d31">(</span><span style="color: #d85311">if</span> <span style="color: black">suc</span><span style="color: #2e2d31">(</span><span style="color: black">Ax</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">+</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">(</span><span style="color: black">B</span><span style="color: #2e2d31">)</span><span style="color: #2e2d31">(</span><span style="color: black">x</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">0</span> <span style="color: #d85311">then</span> <span style="color: #9329ab">false</span> <span style="color: #d85311">else</span> <span style="color: #9329ab">true</span><span style="color: #2e2d31">)</span> <span style="color: #2e2d31">=</span> <span style="color: #9329ab">true</span>
               <span style="color: #d85311">by</span> <span style="color: #d85311">rewrite</span> <span style="color: black">Ax_s</span>
	   <span style="color: #d85311">definition</span> <a href="Nat.pf.html#operator+212"><span style="color: #086c3c">operator +</span></a>
	 <span style="color: #2e2d31">}</span>
       <span style="color: #2e2d31">}</span>
  <span style="color: #d85311">definition</span> <span style="color: #2e2d31">{</span><span style="color: black">set_of_mset</span><span style="color: #2e2d31">,</span> <a href="Set.pf.html#operator167"><span style="color: #086c3c">operator </span></a><span style="color: #2e2d31">,</span> <span style="color: #d85311">operator</span> <span style="color: #2e2d31">&#x2A04;</span><span style="color: #2e2d31">,</span> <a href="MultiSet.pf.html#cnt186"><span style="color: #086c3c">cnt</span></a><span style="color: #2e2d31">,</span> <a href="Set.pf.html#rep165"><span style="color: #086c3c">rep</span></a><span style="color: #2e2d31">}</span>
  <span style="color: #d85311">and</span> <span style="color: #d85311">rewrite</span> <span style="color: black">eq</span>
<span style="color: #d85311">end</span>

    </code></pre>
</body>
</html>