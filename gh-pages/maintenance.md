# How to maintain the site! ðŸ˜€

Here you can find anything and everything you need to know about how to keep the site up-to-date and flexible to the ever changing needs of your users.

For your convenience, we've split up this doc into different sections to make it easier to find exactly what you're looking for

- [Updating site content](#updating-site-content)
- [Updating code blocks](#updating-code-blocks)
- [Changing colors](#changing-colors)

## Updating site content

Most of the pages on the site are generated into html from the markdown files found in the `/doc` directory. If you want to update the content for those pages, just update the markdown file and `/doc/convert.py` will do the rest for you.

The only three pages that are not automatically generated from the markdown files are

- `index.html` : The home page for the site
- `404.html` : The page that GitHub pages serves on a 404 error
- `sandbox.html` : The live code page

If you want to edit the content for one of these pages, you will have to go in and directly change the html yourself. 

## Updating code blocks

Currently, the site displays two kinds of code blocks which we will denote as `deduce` and `non-deduce` code blocks. 
- `deduce` codeblocks are the ones that actually get colored on the site. `convert.py` also generates deduce files for these codeblocks for testing purposes.
- `non-deduce` code blocks are not colored on the site. They are the ones that show up with black text on a light gray background. These code blocks are primarily used for non-deduce code, code output, or intermediary deduce code. 

Code blocks in `index.html` can be edited from on of the `/gh-pages/deduce-code/home_example#` files where `#` is the number of the code block that you want to edit. There are three codeblocks on the home page `1, 2, 3` which are listed in the order that they show up on the site from top to bottom. Code blocks in `index.html` are `deduce` codeblocks, and they appear with three mac-like dots in the top-left corner for style. If you want to remove the three dots in the corner of the code blocks, you just need to remove the `windowed` class from the class list of the codeblock.

```html
<div class="code-wrapper windowed">
    <code id="home_example3">
        <!-- Generated by codeUtils.js -->
    </code>
</div>
```

Code blocks that are found in markdown files can be edited directly in the markdown (again `convert.py` has got your back). You can choose to have a codeblock be a `deduce` or `non-deduce` codeblock in markdown. All code blocks with just three backticks are considered `non-deduce` code blocks:

````
```
Cannot infer type arguments for
	[]
Please make them explicit.
```
````

All code blocks created by tabbing each line is also considered to be `non-deduce` by the markdown converter:

```
    theorem length_nat_empty: length(@[]<Nat>) = 0
    proof
      ?
    end
```

Code blocks with three back ticks followed by `{.deduce^#<label>}` are considered to be `deduce` codeblocks:

````
```{.deduce^#length_nat_empty}
theorem length_nat_empty: length(@[]<Nat>) = 0
proof
  definition length
end
```
````

The label is important and should be unique as it will be used to generate a `/test/should-validate/doc_*.pf` test file. `convert.py` generates one test file per markdown file in the `/doc` directory where the content of that test file is specified by a comment at the bottom on the markdown file. An example is shown below:

````
<!--
```{.deduce^file=ProofIntro.pf}
import Nat
import List

<<length_nat_empty>>
<<length_node42>>

theorem append_12: 
  node(1,empty) ++ node(2, empty) = node(1, node(2, empty))
proof
  definition {operator++, operator++}
end

<<length_nat_one>>
<<length_node42_again>>
```
-->
````

As you can see, arbitrary deduce code can be added within the commented code block, and that code will be added to the test `.pf` file. The labels within double angle brackets (`<<label>>`) are grabbed from the deduce code blocks in the file where the `label` matches up to the label of the code block `{.deduce^#<label>}`.

The name of the file `ProofIntro.pf` is ignored, as it is a remnant of entangled, and is instead replaced with `doc_X.pf` where `X` is based off of the name of the doc file. (For those interested, the `mdToDeduceCode` dictionary in `convert.py` determines `X` from the name of the file being converted).

## Changing colors

Are you tired of the general colorscheme of the site? Do you want to change the code blocks to a light theme (or even sepia)? Fret not, changing the colors is as easy as can be!

All of the colors used on the site are listed at the top of the `/gh-pages/css/stye.css` page. You can easily change the values of those colors by changing their respective hex code. 

```css
--blue: #5DAAF1; -> --blue: #0000FF;
```

The named colors (e.g. `--blue`) are used for general site coloring, for example, the colors of buttons and links. The colors whose names begin with `--cb` are used to color code blocks:

- `--cb-bg`: The background of the code blocks
- `--cb-alt-bg0`: Copy button on the code block
- `--cb-alt-bg1`: Code block scroll bar and the copy button
- `--cb-alt-bg2`: Copy button on the code block
- `--cb-fg`: Default color for text in codeblocks (i.e. non syntax highlighted text)
- `--cb-op`: Operators `(+, -, ++, ...)`
- `--cb-kw`: Keywords `(define, theorem, ...)`
- `--cb-def`: Defined functions `(node, suc, ...)` as well as any defined functions in the code block
- `--cb-prim`: Primitives `(true, false, numbers)`
- `--cb-ty`: Types `(type, bool, Nat, List, ...)`
- `--cb-st`: Strings (deduce doesn't have strings... yet...)
- `--cb-comm`: Comments
